name = "oauth-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[dev]
port = 8789

# ============================================================================
# KV Namespace Bindings
# ============================================================================
# This worker needs access to TWO KV namespaces to bridge the platform
# and customer data without ever mixing them.

# 1. PLATFORM_TOKENS_KV: The TOKENS_KV from `front-auth-api`
#    - Used to READ the developer's platformId.
#    - ID: d09d8bf4e63a47c495384e9ed9b4ec7e
[[kv_namespaces]]
binding = "PLATFORM_TOKENS_KV"
id = "d09d8bf4e63a47c495384e9ed9b4ec7e"

# 2. CUSTOMER_TOKENS_KV: The TOKENS_KV from `api-multi`
#    - Used to WRITE the developer's Stripe credentials.
#    - ID: a9f3331b0c8b48d58c32896482484208
[[kv_namespaces]]
binding = "CUSTOMER_TOKENS_KV"
id = "a9f3331b0c8b48d58c32896482484208"

# ============================================================================
# Secrets
# ============================================================================
# Set these using `wrangler secret put <KEY>`
#
# STRIPE_CLIENT_ID
# STRIPE_CLIENT_SECRET
# FRONTEND_URL
#
